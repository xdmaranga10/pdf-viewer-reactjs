"use strict";var e=require("@babel/runtime/helpers/typeof"),t=require("@babel/runtime/helpers/classCallCheck"),a=require("@babel/runtime/helpers/createClass"),n=require("@babel/runtime/helpers/assertThisInitialized"),l=require("@babel/runtime/helpers/inherits"),s=require("@babel/runtime/helpers/possibleConstructorReturn"),i=require("@babel/runtime/helpers/getPrototypeOf"),r=require("react"),o=require("prop-types"),u=require("@babel/runtime/helpers/asyncToGenerator"),c=require("@babel/runtime/helpers/slicedToArray"),d=require("@babel/runtime/regenerator"),f=require("pdfjs-dist"),m=require("pdfjs-dist/build/pdf.worker.entry"),h=require("react-modal"),p=require("@babel/runtime/helpers/defineProperty");function g(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var b=g(e),v=g(t),R=g(a),y=g(n),k=g(l),E=g(s),x=g(i),w=g(r),C=g(o),N=g(u),S=g(c),q=g(d),P=g(f),Z=g(m),O=g(h),T=g(p),B=function(e){var t=e.message;return w.default.createElement("div",{className:"columns has-text-danger has-margin-top-5 is-mobile"},w.default.createElement("div",{className:"column is-4 has-text-right has-padding-5"},w.default.createElement("span",{className:"icon"},w.default.createElement("i",{className:"material-icons"},"error_outline"))),w.default.createElement("div",{className:"column is-8 has-text-left has-padding-5"},w.default.createElement("small",null,t)))};B.propTypes={message:C.default.string.isRequired},P.default.GlobalWorkerOptions.workerSrc=Z.default;var A=null,j=function(e){var t=e.document,a=e.withCredentials,n=e.password,l=e.pageNum,s=e.scale,i=e.rotation,o=e.pageCount,u=e.changePage,c=e.showThumbnail,d=e.protectContent,f=e.watermark,m=e.alert,h=e.canvasCss,p=r.useState({status:!1,message:""}),g=S.default(p,2),b=g[0],v=g[1],R=r.useRef(null),y=r.useRef(null),k=r.useRef(null),E=r.useRef(!0),x=r.useState([]),C=S.default(x,2),Z=C[0],T=C[1],j=r.useState([]),I=S.default(j,2),z=I[0],L=I[1],D=r.useState([]),_=S.default(D,2),M=_[0],F=_[1],H=r.useState(!1),W=S.default(H,2),V=W[0],G=W[1],U=m||B,X=function(){var e=N.default(q.default.mark((function e(){var l;return q.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l={withCredentials:a,password:n},null==t.url?l.data=atob(t.base64):l.url=t.url,e.next=5,P.default.getDocument(l).promise;case 5:return A=e.sent,e.next=8,J();case 8:return e.next=10,K();case 10:Q(),o(A.numPages),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.warn("Error while opening the document !\n",e.t0),v({status:!0,message:"Error while opening the document !"});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=N.default(q.default.mark((function e(){var t,a,n,r,o,u,c,d,m,h,p,g,b,y,k;return q.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getPage(l);case 3:return t=e.sent,a=t.getViewport({scale:s,rotation:i}),(n=R.current).height=a.height,n.width=a.width,r=n.getContext("2d"),o={canvasContext:r,viewport:a},u=t.render(o),e.prev=11,e.next=14,u.promise;case 14:0!==Object.entries(f).length&&(c=f.text,d=f.diagonal,m=f.opacity,h=f.font,p=f.size,g=f.color,r.globalAlpha=m,r.font="".concat(p*s,"px ").concat(""!==h?h:"Comic Sans MS"),r.fillStyle=g,b=r.measureText(c),y=b.width,k=p*s,r.translate(a.width/2,a.height/2),d&&r.rotate(-.785),r.fillText(c,-y/2,k/2)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(11),console.warn("Error occured while rendering !\n",e.t0),v({status:!0,message:"Error occured while rendering !"});case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(0),console.warn("Error while reading the pages !\n",e.t1),v({status:!0,message:"Error while reading the pages !"});case 27:case"end":return e.stop()}}),e,null,[[0,23],[11,17]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=N.default(q.default.mark((function e(){var t,a,n,l,s,i,r,o,u,d,m,h,p,g,b,v,R,k,E;return q.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===Object.entries(c).length){e.next=26;break}t=[],a=.1,n=0,1<=c.scale&&c.scale<=5&&(a=c.scale/10),-90!==c.rotationAngle&&90!==c.rotationAngle||(n=c.rotationAngle),l=1;case 7:if(!(l<=A.numPages)){e.next=25;break}return e.next=10,A.getPage(l);case 10:return s=e.sent,i=s.getViewport({scale:a,rotation:n}),(r=y.current).height=i.height,r.width=i.width,o=r.getContext("2d"),u={canvasContext:o,viewport:i},d=s.render(u),e.next=20,d.promise;case 20:0!==Object.entries(f).length&&(m=f.text,h=f.diagonal,p=f.opacity,g=f.font,b=f.size,v=f.color,o.globalAlpha=p,o.font="".concat(b*a,"px ").concat(""!==g?g:"Comic Sans MS"),o.fillStyle=v,R=o.measureText(m),k=R.width,E=b*a,o.translate(i.width/2,i.height/2),h&&o.rotate(-.785),o.fillText(m,-k/2,E/2)),t.push({image:r.toDataURL("image/png"),height:i.height,width:i.width});case 22:l++,e.next=7;break;case 25:L(t);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){if(0!==Object.entries(c).length){for(var e=[],t=[],a=function(a){var n=z[a-1].image,s=z[a-1].height,i=z[a-1].width;e.push(w.default.createElement("img",{style:l===a?{height:s,width:i,display:"flex",cursor:"pointer",margin:"10px 15px",border:"5px solid red"}:{height:s,width:i,display:"flex",cursor:"pointer",margin:"10px 15px",boxShadow:"rgba(0, 0, 0, 0.6) 0px 2px 2px 0px"},onClick:function(){return u(a)},ref:l===a?k:null,key:a,alt:"thumbnail of page ".concat(a),src:n})),t.push({image:n,isSelected:l===a,onClick:function(){return u(a)}})},n=1;n<=z.length;n++)a(n);e.push(w.default.createElement("div",{key:0,style:{padding:"0px 10px"}})),T(e),F(t)}};r.useEffect((function(){X()}),[t,n]),r.useEffect((function(){E.current?E.current=!1:(J(),Q())}),[l,s,i,o]),r.useEffect((function(){null!==k.current&&0!==Object.entries(c).length&&k.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}));var Y=w.default.createElement(O.default,{isOpen:V,onRequestClose:function(){return G(!1)}},w.default.createElement("div",{style:{textAlign:"right",width:"100%"}},w.default.createElement("button",{type:"button",onClick:function(){return G(!1)},style:{background:"gray",border:"none",borderRadius:"50%",color:"white",cursor:"pointer",outline:"none",padding:"8px 8px 5px"}},w.default.createElement("i",{className:"material-icons",style:{fontSize:"16px"}},"close"))),w.default.createElement("div",{style:{marginTop:"20px"}},M.map((function(e,t){var a=e.image,n=e.onClick,l=e.isSelected;return w.default.createElement("div",{key:t,style:{display:"inline-block",margin:"10px",width:"calc(20% - 20px)"}},w.default.createElement("img",{src:a,onClick:function(){G(!1),n()},style:l?{border:"5px solid red",cursor:"pointer",display:"block",width:"100%"}:{border:"1px solid black",cursor:"pointer",display:"block",width:"100%"}}),w.default.createElement("span",{style:{display:"block",fontWeight:"700",marginTop:"5px"}},t+1))})))),$=w.default.createElement("button",{type:"button",onClick:function(){return G(!0)},style:{background:"none",backgroundColor:"white",border:"1px solid white",bottom:"18px",color:"black",cursor:"pointer",fontSize:"14px",left:"10px",lineHeight:"0",margin:"0 auto",outline:"none",padding:"5px 10px",position:"absolute"}},w.default.createElement("i",{className:"material-icons"},"grid_on"));return b.status?(o(-1),w.default.createElement("div",{className:h||"",style:h?{}:{height:"1000px",overflow:"auto"}},w.default.createElement(U,{message:b.message}))):0!==Object.entries(c).length?w.default.createElement(w.default.Fragment,null,Y,$,w.default.createElement("div",{className:h||"",style:h?{}:{height:"1000px",overflow:"auto"}},w.default.createElement("canvas",{onContextMenu:function(e){return d?e.preventDefault():null},ref:R,width:"undefined"!=typeof window&&window.innerWidth,height:"undefined"!=typeof window&&window.innerHeight})),w.default.createElement("div",{style:{backgroundColor:"#EAE6DA",display:"flex",flexDirection:"row",overflowX:"auto"}},Z),w.default.createElement("canvas",{ref:y,style:{display:"none"}})):w.default.createElement(w.default.Fragment,null,Y,$,w.default.createElement("div",{className:h||"",style:h?{}:{height:"1000px",overflow:"auto"}},w.default.createElement("canvas",{onContextMenu:function(e){return d?e.preventDefault():null},ref:R,width:"undefined"!=typeof window&&window.innerWidth,height:"undefined"!=typeof window&&window.innerHeight})))};j.propTypes={document:C.default.any.isRequired,withCredentials:C.default.bool,password:C.default.string,pageNum:C.default.number.isRequired,scale:C.default.number.isRequired,rotation:C.default.number.isRequired,changePage:C.default.func,pageCount:C.default.func,showThumbnail:C.default.shape({scale:C.default.number,rotationAngle:C.default.number}),protectContent:C.default.bool,watermark:C.default.shape({text:C.default.string,diagonal:C.default.bool,opacity:C.default.string,size:C.default.string,color:C.default.string}),canvasCss:C.default.string},j.defaultProps={changePage:function(){},pageCount:function(){},showThumbnail:{},protectContent:!1,watermark:{},canvasCss:""};var I=function(e){var t=e.css,a=e.page,n=e.pages,l=e.handleNextClick,s=t||"button is-black is-marginless";return a===n?w.default.createElement("button",{className:s,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"keyboard_arrow_right"))):w.default.createElement("button",{className:s,onClick:l},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"keyboard_arrow_right")))};I.propTypes={css:C.default.string,page:C.default.number.isRequired,pages:C.default.number.isRequired,handleNextClick:C.default.func.isRequired};var z=function(e){var t=e.css,a=e.page,n=e.pages,l=t||"is-size-7 is-vcentered has-text-centered is-inline-flex has-padding-top-5 button is-black is-marginless has-margin-left-5 has-margin-right-5";return w.default.createElement("span",{className:l},"Page ".concat(a," / ").concat(n))};z.propTypes={css:C.default.string,page:C.default.number.isRequired,pages:C.default.number.isRequired};var L=function(e){var t=e.css,a=e.page,n=e.handlePrevClick,l=t||"button is-black is-marginless";return 1===a?w.default.createElement("button",{className:l,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"keyboard_arrow_left"))):w.default.createElement("button",{className:l,onClick:n},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"keyboard_arrow_left")))};L.propTypes={css:C.default.string,page:C.default.number.isRequired,handlePrevClick:C.default.func.isRequired};var D=function(e){var t=e.css,a=e.scale,n=e.defaultScale,l=e.maxScale,s=e.handleZoomIn,i=t||"button is-black is-marginless has-margin-left-5 has-margin-right-5",r=l;return n>l&&(r=n),a.toFixed(2)===r.toFixed(2)?w.default.createElement("button",{className:i,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"zoom_in"))):w.default.createElement("button",{className:i,onClick:s},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"zoom_in")))};D.propTypes={css:C.default.string,scale:C.default.number.isRequired,defaultScale:C.default.number.isRequired,maxScale:C.default.number.isRequired,handleZoomIn:C.default.func.isRequired};var _=function(e){var t=e.css,a=e.scale,n=e.defaultScale,l=e.minScale,s=e.handleZoomOut,i=t||"button is-black is-marginless has-margin-left-5 has-margin-right-5",r=l;return n<l&&(r=n),a.toFixed(2)===r.toFixed(2)?w.default.createElement("button",{className:i,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"zoom_out"))):w.default.createElement("button",{className:i,onClick:s},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"zoom_out")))};_.propTypes={css:C.default.string,scale:C.default.number.isRequired,defaultScale:C.default.number.isRequired,minScale:C.default.number.isRequired,handleZoomOut:C.default.func.isRequired};var M=function(e){var t=e.css,a=e.scale,n=e.defaultScale,l=e.handleResetZoom,s=t||"button is-black is-marginless has-margin-left-5 has-margin-right-5";return a.toFixed(2)===n.toFixed(2)?w.default.createElement("button",{className:s,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"refresh"))):w.default.createElement("button",{className:s,onClick:l},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"refresh")))};M.propTypes={css:C.default.string,scale:C.default.number.isRequired,defaultScale:C.default.number.isRequired,handleResetZoom:C.default.func.isRequired};var F=function(e){var t=e.css,a=e.rotationAngle,n=e.handleRotateLeft,l=t||"button is-black is-marginless has-margin-left-5 has-margin-right-5";return-90===a?w.default.createElement("button",{className:l,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"rotate_left"))):w.default.createElement("button",{className:l,onClick:n},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"rotate_left")))};F.propTypes={css:C.default.string,rotationAngle:C.default.number.isRequired,handleRotateLeft:C.default.func.isRequired};var H=function(e){var t=e.css,a=e.rotationAngle,n=e.handleResetRotation,l=t||"button is-black is-marginless has-margin-left-5 has-margin-right-5";return 0===a?w.default.createElement("button",{className:l,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"refresh"))):w.default.createElement("button",{className:l,onClick:n},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"refresh")))};H.propTypes={css:C.default.string,rotationAngle:C.default.number.isRequired,handleResetRotation:C.default.func.isRequired};var W=function(e){var t=e.css,a=e.rotationAngle,n=e.handleRotateRight,l=t||"button is-black is-marginless has-margin-left-5 has-margin-right-5";return 90===a?w.default.createElement("button",{className:l,disabled:!0},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"rotate_right"))):w.default.createElement("button",{className:l,onClick:n},w.default.createElement("span",{className:"icon is-small"},w.default.createElement("i",{className:"material-icons"},"rotate_right")))};W.propTypes={css:C.default.string,rotationAngle:C.default.number.isRequired,handleRotateRight:C.default.func.isRequired};var V=function(e){var t=e.page,a=e.pages,n=e.scale,l=e.defaultScale,s=e.maxScale,i=e.minScale,r=e.rotationAngle,o=e.hideZoom,u=e.hideRotation,c=e.css,d=e.handlePrevClick,f=e.handleNextClick,m=e.handleZoomIn,h=e.handleResetZoom,p=e.handleZoomOut,g=e.handleRotateLeft,b=e.handleResetRotation,v=e.handleRotateRight;return e.handleModalToggle,w.default.createElement("div",{className:"columns is-gapless ".concat(c.navbarWrapper||"box is-mobile has-text-white has-background-black has-margin-top-15 has-margin-bottom-15")},o?w.default.createElement("div",{className:"column is-2"}):w.default.createElement("div",{className:"column is-2 buttons are-small has-addons"},w.default.createElement(_,{scale:n,minScale:i,defaultScale:l,css:c.zoomOutBtn,handleZoomOut:p}),w.default.createElement(M,{scale:n,defaultScale:l,css:c.resetZoomBtn,handleResetZoom:h}),w.default.createElement(D,{scale:n,maxScale:s,defaultScale:l,css:c.zoomInBtn,handleZoomIn:m})),w.default.createElement("div",{className:"column"}),w.default.createElement("div",{className:"column is-3 buttons are-small has-addons is-centered"},w.default.createElement(L,{css:c.previousPageBtn,page:t,pages:a,handlePrevClick:d}),w.default.createElement(z,{css:c.pageIndicator,page:t,pages:a}),w.default.createElement(I,{css:c.nextPageBtn,page:t,pages:a,handleNextClick:f})),w.default.createElement("div",{className:"column"}),u?w.default.createElement("div",{className:"column is-2"}):w.default.createElement("div",{className:"column is-2 buttons are-small has-addons is-right"},w.default.createElement(F,{css:c.rotateLeftBtn,rotationAngle:r,handleRotateLeft:g}),w.default.createElement(H,{css:c.resetRotationBtn,rotationAngle:r,handleResetRotation:b}),w.default.createElement(W,{css:c.rotateRightBtn,rotationAngle:r,handleRotateRight:v})))};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){T.default(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}V.propTypes={page:C.default.number.isRequired,pages:C.default.number.isRequired,scale:C.default.number,defaultScale:C.default.number,maxScale:C.default.number,minScale:C.default.number,rotationAngle:C.default.number,hideZoom:C.default.bool,hideRotation:C.default.bool,css:C.default.shape({navbarWrapper:C.default.string,pages:C.default.string,pageIndicator:C.default.string,previousPageBtn:C.default.string,nextPageBtn:C.default.string,zoomOutBtn:C.default.string,resetZoomBtn:C.default.string,zoomInBtn:C.default.string,rotateLeftBtn:C.default.string,resetRotationBtn:C.default.string,rotateRightBtn:C.default.string}),elements:C.default.shape({previousPageBtn:C.default.any,nextPageBtn:C.default.any,pages:C.default.any}),handlePrevClick:C.default.func.isRequired,handleNextClick:C.default.func.isRequired,handleZoomIn:C.default.func.isRequired,handleResetZoom:C.default.func.isRequired,handleZoomOut:C.default.func.isRequired,handleRotateLeft:C.default.func.isRequired,handleResetRotation:C.default.func.isRequired,handleRotateRight:C.default.func.isRequired,handleModalToggle:C.default.func.isRequired},V.defaultProps={css:{},elements:{}};var X={display:"inline-block",verticalAlign:"text-bottom",backgroundColor:"currentColor",borderRadius:"50%",opacity:0,width:"0.5rem",height:"0.5rem",animationDuration:"0.75s",animationTimingFunction:"linear",animationIterationCount:"infinite",animationDirection:"normal",animationFillMode:"none",animationPlayState:"running",animationName:"spinner-grow"},J=U(U({},X),{},{animationDelay:"0s"}),K=U(U({},X),{},{animationDelay:"0.25s"}),Q=U(U({},X),{},{animationDelay:"0.5s"}),Y=function(){return w.default.createElement("div",{className:"flex-row has-margin-10 justify-center align-items-flex-end"},w.default.createElement("p",{className:"is-size-3 flex-column is-marginless"},"Loading"),w.default.createElement("div",{className:"flex-column has-padding-10"},w.default.createElement("div",{style:J})),w.default.createElement("div",{className:"flex-column has-padding-10"},w.default.createElement("div",{style:K})),w.default.createElement("div",{className:"flex-column has-padding-10"},w.default.createElement("div",{style:Q})))};function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=x.default(e);if(t){var l=x.default(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return E.default(this,a)}}try{require("bulma/css/bulma.css"),require("bulma-helpers/css/bulma-helpers.min.css"),require("material-design-icons/iconfont/material-icons.css")}catch(e){}var ee=function(e){k.default(a,e);var t=$(a);function a(e){var n;return v.default(this,a),(n=t.call(this,e)).state={page:n.props.page,pages:0,scale:n.props.scale,defaultScale:n.props.scale,rotationAngle:n.props.rotationAngle,isReady:!1},n.getPageCount=n.getPageCount.bind(y.default(n)),n.handleThumbnailClick=n.handleThumbnailClick.bind(y.default(n)),n.handlePrevClick=n.handlePrevClick.bind(y.default(n)),n.handleNextClick=n.handleNextClick.bind(y.default(n)),n.handleZoomIn=n.handleZoomIn.bind(y.default(n)),n.handleResetZoom=n.handleResetZoom.bind(y.default(n)),n.handleZoomOut=n.handleZoomOut.bind(y.default(n)),n.handleRotateLeft=n.handleRotateLeft.bind(y.default(n)),n.handleResetRotation=n.handleResetRotation.bind(y.default(n)),n.handleRotateRight=n.handleRotateRight.bind(y.default(n)),n.handleHotkeysPressed=n.handleHotkeysPressed.bind(y.default(n)),n}return R.default(a,[{key:"getPageCount",value:function(e){this.state.pages!==e&&(this.setState({pages:e,isReady:!0}),this.props.getMaxPageCount&&this.props.getMaxPageCount(e))}},{key:"handleThumbnailClick",value:function(e){this.state.page!==e&&this.setState({page:e})}},{key:"handlePrevClick",value:function(){1!==this.state.page&&(this.setState({page:this.state.page-1}),this.props.onPrevBtnClick&&this.props.onPrevBtnClick(this.state.page-1))}},{key:"handleNextClick",value:function(){this.state.page!==this.pages&&(this.setState({page:this.state.page+1}),this.props.onNextBtnClick&&this.props.onNextBtnClick(this.state.page+1))}},{key:"handleZoomIn",value:function(){var e=this.props.maxScale;this.state.defaultScale>this.props.maxScale&&(e=this.state.defaultScale),this.state.scale<e&&this.setState({scale:this.state.scale+this.props.scaleStep}),this.props.onZoom&&this.props.onZoom(this.state.scale+this.props.scaleStep)}},{key:"handleResetZoom",value:function(){this.setState({scale:this.state.defaultScale}),this.props.onZoom&&this.props.onZoom(this.state.defaultScale)}},{key:"handleZoomOut",value:function(){var e=this.props.minScale;this.state.defaultScale<this.props.minScale&&(e=this.state.defaultScale),this.state.scale>e&&this.setState({scale:this.state.scale-this.props.scaleStep}),this.props.onZoom&&this.props.onZoom(this.state.scale-this.props.scaleStep)}},{key:"handleRotateLeft",value:function(){-90!==this.state.rotationAngle&&this.setState({rotationAngle:-90}),this.props.onRotation&&this.props.onRotation(-90)}},{key:"handleResetRotation",value:function(){0!==this.state.rotationAngle&&this.setState({rotationAngle:0}),this.props.onRotation&&this.props.onRotation(0)}},{key:"handleRotateRight",value:function(){90!==this.state.rotationAngle&&this.setState({rotationAngle:90}),this.props.onRotation&&this.props.onRotation(90)}},{key:"handleHotkeysPressed",value:function(e){if(37===e.keyCode){if(1===this.state.page)return;this.setState({page:this.state.page-1}),this.props.onPrevBtnClick&&this.props.onPrevBtnClick(this.state.page-1)}else if(39===e.keyCode){if(this.state.page===this.state.pages)return;this.setState({page:this.state.page+1}),this.props.onNextBtnClick&&this.props.onNextBtnClick(this.state.page+1)}}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleHotkeysPressed)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleHotkeysPressed)}},{key:"render",value:function(){var e=this,t=this.props,a=t.document,n=t.withCredentials,l=t.password,s=t.loader,i=t.maxScale,r=t.minScale,o=t.hideNavbar,u=t.hideZoom,c=t.hideRotation,d=t.navbarOnTop,f=t.navigation,m=t.css,h=t.canvasCss,p=t.onDocumentClick,g=t.showThumbnail,v=t.protectContent,R=t.watermark,y=t.alert,k=this.state,E=k.page,x=k.pages,C=k.scale,N=k.defaultScale,S=k.rotationAngle,q=f,P=w.default.createElement(j,{document:a,withCredentials:n,password:l,pageNum:E,scale:C,rotation:S,changePage:function(t){return e.handleThumbnailClick(t)},pageCount:function(t){return e.getPageCount(t)},showThumbnail:g,protectContent:v,watermark:R,alert:y,canvasCss:h}),Z=null;return!o&&x>0&&(Z=!f||f&&"object"===b.default(f)?w.default.createElement(V,{page:E,pages:x,scale:C,defaultScale:N,maxScale:i,minScale:r,rotationAngle:S,hideZoom:u,hideRotation:c,css:f?f.css:void 0,handleNextClick:this.handleNextClick,handlePrevClick:this.handlePrevClick,handleZoomIn:this.handleZoomIn,handleResetZoom:this.handleResetZoom,handleZoomOut:this.handleZoomOut,handleRotateLeft:this.handleRotateLeft,handleResetRotation:this.handleResetRotation,handleRotateRight:this.handleRotateRight}):w.default.createElement(q,{page:E,pages:x,scale:C,defaultScale:N,maxScale:i,minScale:r,rotationAngle:S,hideZoom:u,hideRotation:c,handleNextClick:this.handleNextClick,handlePrevClick:this.handlePrevClick,handleZoomIn:this.handleZoomIn,handleResetZoom:this.handleResetZoom,handleZoomOut:this.handleZoomOut,handleRotateLeft:this.handleRotateLeft,handleResetRotation:this.handleResetRotation,handleRotateRight:this.handleRotateRight})),w.default.createElement("div",{className:m||"container text-center"},w.default.createElement("div",{style:{display:this.state.isReady?"none":"block"}},w.default.createElement("div",{className:h||"",style:h?{}:{height:"1000px",overflow:"auto"}},s||w.default.createElement(Y,null))),w.default.createElement("div",{style:{display:this.state.isReady?"block":"none"}},d?w.default.createElement("div",null,w.default.createElement("div",null,Z),w.default.createElement("div",{onClick:p},P)):w.default.createElement("div",null,w.default.createElement("div",{onClick:p},P),w.default.createElement("div",null,Z))))}}]),a}(w.default.Component);ee.propTypes={document:C.default.shape({url:C.default.string,base64:C.default.string}).isRequired,withCredentials:C.default.bool,password:C.default.string,loader:C.default.node,page:C.default.number,scale:C.default.number,scaleStep:C.default.number,maxScale:C.default.number,minScale:C.default.number,css:C.default.string,canvasCss:C.default.string,rotationAngle:C.default.number,onDocumentClick:C.default.func,onPrevBtnClick:C.default.func,onNextBtnClick:C.default.func,onZoom:C.default.func,onRotation:C.default.func,getMaxPageCount:C.default.func,hideNavbar:C.default.bool,navbarOnTop:C.default.bool,hideZoom:C.default.bool,hideRotation:C.default.bool,showThumbnail:C.default.shape({scale:C.default.number,rotationAngle:C.default.number}),protectContent:C.default.bool,watermark:C.default.shape({text:C.default.string,diagonal:C.default.bool,opacity:C.default.string,font:C.default.string,size:C.default.string,color:C.default.string}),alert:C.default.any,navigation:C.default.oneOfType([C.default.shape({css:C.default.shape({navbarWrapper:C.default.string,zoomOutBtn:C.default.string,resetZoomBtn:C.default.string,zoomInBtn:C.default.string,previousPageBtn:C.default.string,pageIndicator:C.default.string,nextPageBtn:C.default.string,rotateLeftBtn:C.default.string,resetRotationBtn:C.default.string,rotateRightBtn:C.default.string})}),C.default.any])},ee.defaultProps={page:1,withCredentials:!1,password:"",defaultScale:1,scale:1,scaleStep:1,maxScale:3,minScale:1,rotationAngle:0,hideNavbar:!1,hideZoom:!1,hideRotation:!1,navbarOnTop:!1,canvasCss:""},module.exports=ee;
